Find and update objects
=======================

This document describes the procedure for finding and updating serialized
objects in the rda files located in a directory hierarchy. This procedure
was developped and used to update all "old" serialized SummarizedExperiment
objects located in the data-experiment svn repository.

STEP 1: Prepare list of rda files to scan.

  cd <dir/you/want/to/search>
  find . -type d -name '.svn' -prune -o -type f -print | \
      grep -Ei '\.(rda|RData)$' >rda_files

STEP 2: Scan the rda files.

  cd <dir/you/want/to/search>

  R="$HOME/bin/R-3.2"
  R_SCRIPT="scriptfile <- system.file('scripts', "
  R_SCRIPT="$R_SCRIPT 'scan_rda_files.R', "
  R_SCRIPT="$R_SCRIPT package='SummarizedExperiment', mustWork=TRUE)"
  R_SCRIPT="$R_SCRIPT; source(scriptfile)"
  echo "$R_SCRIPT" | $R --vanilla >scan_rda_files.log 2>&1 &

STEP 3: Collect rda objects to update.

  cd <dir/you/want/to/search>

  R="$HOME/bin/R-3.2"
  R_SCRIPT="scriptfile <- system.file('scripts', "
  R_SCRIPT="$R_SCRIPT 'collect_rda_objects_to_update.R', "
  R_SCRIPT="$R_SCRIPT package='SummarizedExperiment', mustWork=TRUE)"
  R_SCRIPT="$R_SCRIPT; source(scriptfile)"
  echo "$R_SCRIPT" | $R --vanilla >collect_rda_objects_to_update.log 2>&1 &

STEP 4: Update rda objects.

  cd <dir/you/want/to/search>

  R="$HOME/bin/R-3.2"
  R_SCRIPT="scriptfile <- system.file('scripts', "
  R_SCRIPT="$R_SCRIPT 'update_rda_objects.R', "
  R_SCRIPT="$R_SCRIPT package='SummarizedExperiment', mustWork=TRUE)"
  R_SCRIPT="$R_SCRIPT; source(scriptfile)"
  echo "$R_SCRIPT" | $R --vanilla >update_rda_objects.log 2>&1 &

